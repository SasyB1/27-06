@using _27_06.Classi
@model IEnumerable<Statistiche>
@{
    ViewData["Title"] = "Home Page";
}


@functions {
        string Percentuale(int percentuale)
        {
            string[] classi = { "success", "warning", "danger"};
            var i = percentuale < 25 ? 0 : percentuale < 50 ? 1 : 2;
            return classi[i];
        }
}





<div class="text-center">
    <h1 class="display-4">Multisala Odeon</h1>
    <a asp-action="Compra" class="btn btn-primary">Acquista Biglietto</a>
</div>

<div class="row mt-3">
    <div class="col alert alert-info text-center">Totale biglietti acquistati: @Model.Select(s => s.BigliettiTotaliVenduti).Sum()</div>
</div>

<div class="row mt-3">
    @foreach (var statistica in Model)
    {
        var p = (int)statistica.BigliettiPercentuale;
        var c = Percentuale(p);

        <div class="card col-4 flex-column">
            <div class="card-header">
                <div class="progress">
  
                    <div class="progress-bar progress-bar-striped progress-bar-animated bg-@c" role="progressbar" style="width: @p%;" aria-valuenow="@p" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="card-title"><h6 class="display-6 text-center">@statistica.sala.Nome</h6></div>
            </div>
            <div class="card-body">
                <div class="card-text">
                    <table class="table table-borderless m-auto">
                        <tr><td>Capienza massima:</td><td class="text-end">@statistica.sala.Posti</td></tr>
                        <tr><td>Biglietti normali:</td><td class="text-end">@statistica.BigliettiNormaliVenduti</td></tr>
                        <tr><td>Biglietti ridotti:</td><td class="text-end">@statistica.BigliettiRidottiVenduti</td></tr>
                        <tr><td>Biglietti acquistati:</td><td class="text-end">@statistica.BigliettiTotaliVenduti</td></tr>
                    </table>
                </div>
            </div>
        </div>
    }
    


</div>